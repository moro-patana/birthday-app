{"version":3,"sources":["lib/element.js","lib/index.js","lib/utils.js","script.js"],"names":["tbody","document","querySelector","addBtn","filterLastNameInput","filterMonthInput","filterForm","resetBtn","wait","ms","Promise","resolve","setTimeout","destroyPopup","popup","classList","remove","nth","day","basepoint","fetchPerson","displayList","html","storedHTML","data","innerHTML","fetch","response","json","personList","sort","a","b","lastName","map","person","current_datetime","Date","birthday","date","getDate","year","getFullYear","month","getMonth","birthMonth","getDay","fullDate","YearMonth","today","age","yearNow","birthdayYear","aDay","countDay","Math","ceil","getTime","id","picture","firstName","join","resetFilters","e","reset","searchPerson","searchInput","value","lowerCaseFilter","toLowerCase","filterLastName","filter","includes","filterHTML","searchByBirthMonth","searchMonth","lowerCaseMonth","filterBirthMonth","birthdayMonth","stringDate","toLocaleString","filterMonthHTML","editPerson","editBtn","target","closest","preventDefault","findTr","btn","editPopup","console","log","reject","find","createElement","add","window","addEventListener","dispatchEvent","CustomEvent","once","body","appendChild","deletePerson","tableRow","dataset","deletePopup","modal","personToDelete","addList","addListPopup","newPopupList","form","currentTarget","newList","profile","lastname","firstname","birthdate","now","push","initLocalStorage","dataList","JSON","parse","localStorage","getItem","updateLocalStorage","setItem","stringify"],"mappings":"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","file":"script.75da7f30.js","sourceRoot":"..","sourcesContent":["// Grab elements\r\nexport const tbody = document.querySelector('tbody');\r\nexport const addBtn = document.querySelector(`.add`);\r\nexport const filterLastNameInput = document.querySelector('#filter-lastname');\r\nexport const filterMonthInput = document.querySelector('#filter-month');\r\nexport const filterForm = document.querySelector('.filter-person');\r\nexport const resetBtn = document.querySelector('.reset');\r\n\r\n","export function wait(ms = 0) {\r\n\treturn new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n// Async function to destroy popup\r\nexport async function destroyPopup(popup) {\r\n\tpopup.classList.remove('open');\r\n\tawait wait(200);\r\n\tpopup.remove();\r\n\tpopup = null;\r\n}\r\n","export function nth(day) {\r\n    if (day > 3 && day < 21) return 'th';\r\n    switch (day % 10) {\r\n      case 1:  return \"st\";\r\n      case 2:  return \"nd\";\r\n      case 3:  return \"rd\";\r\n      default: return \"th\";\r\n    }\r\n  }\r\n","import { tbody, addBtn, filterLastNameInput, filterMonthInput, filterForm, resetBtn } from './lib/element.js';\nimport { wait, destroyPopup } from './lib/index.js';\nimport { nth } from './lib/utils.js';\n\nconst basepoint = './people.json';\n// Fetch data from people.json\nasync function fetchPerson() {\n    const response = await fetch(basepoint);\n    let data = await response.json();\n    const storedHTML = (personList) => {\n        data.sort((a, b) => {\n            if (a === b) {\n              return 0;\n            }\n            return a.lastName < b.lastName ? -1 : 1;\n          });\n          data;\n\n// Map through the data\n        return personList\n        .map(person => {\n                // Take the birthday date from the data\n                  let current_datetime = new Date(person.birthday);\n                  let date = current_datetime.getDate();\n                  let year = current_datetime.getFullYear();\n                  let month = current_datetime.getMonth();\n                // Add 1 to the month so that the array will not start at 0\n                  let birthMonth = month + 1;\n                  let day = current_datetime.getDay();\n                  let fullDate = year + \"/\" + birthMonth + \"/\" + date;\n                  let YearMonth = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"Jolay\", \"August\", \"September\", \"October\", \"November\", \"December\"][current_datetime.getMonth()];\n\n                // Calculate ages based on the birthday year\n                  let today = new Date();\n                  let age = today.getFullYear() - year;\n\n                // Calculate days number between Date.now() and the birthday months and day\n                  let yearNow = today.getFullYear();\n                  let birthdayYear = new Date(yearNow, month, date);\n                  let aDay = 1000*60*60*24;\n                  let countDay = Math.ceil((birthdayYear.getTime() - today.getTime()) / aDay);\n                \n                // Create table row\n                return `<tr data-id=\"${person.id}\">\n                    <th scope=\"row\"><img src=\"${person.picture}\" alt=\"${person.firstName + ' ' + person.lastName}\"/></th>\n                    <td>${person.lastName}</td>\n                    <td>${person.firstName}</td>\n                    <td>${fullDate}</td>\n                    <td>Turns ${age} on ${YearMonth} ${date}<sup>${nth(date)}</sup></td>\n                    <td> ${countDay < 0 ? countDay * -1 + \" \" + \"day(s) ago\" : \"after\" + \" \" + countDay + \" \" + \"day(s)\"}</td>\n                    <td>\n                        <button type=\"button\" class=\"btn edit\" value=\"${person.id}\">\n                        <img class=\"icon\" src=\"./img/edit.svg\" alt=\"edit\">\n                        </button>\n                    </td>\n                    <td class=\"text-white\">\n                        <button type=\"button\" class=\"btn delete\" data-id=\"${person.id}\">\n                        <img class=\"icon\" src=\"./img/delete.svg\" alt=\"delete\">\n                        </button>\n                    </td>\n                </tr>`\n        })\n        .join('');\n    }\n     function displayList(){\n         const html = storedHTML(data);\n        tbody.innerHTML = html;\n    };\n    displayList();\n    const resetFilters = e => {\n        filterForm.reset();\n        displayList();\n    };\n\n    const searchPerson = (e) => {\n        const searchInput = filterLastNameInput.value;\n        const lowerCaseFilter = searchInput.toLowerCase();\n    // Filter the data to get the lastname and turn them into lowercase\n        const filterLastName = data.filter(person => person.lastName.toLowerCase().includes(lowerCaseFilter));\n        const filterHTML = storedHTML(filterLastName);\n        tbody.innerHTML = filterHTML;\n    }\n    const searchByBirthMonth = (e) => {\n        const searchMonth = filterMonthInput.value;\n        const lowerCaseMonth = searchMonth.toLowerCase();\n    // Filter the data to get the birthday and turn them into lowercase\n        const filterBirthMonth = data.filter(person => {\n            const birthdayMonth = new Date(person.birthday);\n    // stringify the birthdate\n            const stringDate = birthdayMonth\n            .toLocaleString('USA', { month: 'long' })\n            \n            return stringDate.toLowerCase().includes(lowerCaseMonth);\n        \n        })\n        \n        const filterMonthHTML = storedHTML(filterBirthMonth)\n        tbody.innerHTML = filterMonthHTML;\n\n    }\n\n\n// Grab the edit button\n    const editPerson = (e) => {\n        const editBtn = e.target.closest('button.edit');\n        if (editBtn) {\n            e.preventDefault();\n            const findTr = e.target.closest('tr');\n            const btn = findTr.querySelector('.edit')\n            const id = btn.value;\n            editPopup(id);\n            // tbody.dispatchEvent(new CustomEvent('listUpdated'));\n            \n        }\n    }\n    // Create an form html to edit the list \n    const editPopup = (id) => {\n        console.log(id);\n        return new Promise(async function (resolve, reject) {\n            const person = data.find(person => person.id == id);\n// Create form element to edit the list\n            const popup = document.createElement(`form`);\n            popup.classList.add('popup');\n            popup.innerHTML = `\n                <div class=\"form-input\">\n                <fieldset>\n                <label for=\"picture\">Picture</label>\n                <input\n                    type=\"url\"\n                    name=\"picture\"\n                    id=\"picture\"\n                    value\n                    =\"${person.picture}\"\n                />\n                </fieldset>\n                    <fieldset>\n                        <label for=\"lastName\">Lastname</label>\n                        <input\n                            type=\"text\"\n                            name=\"lastName\"\n                            id=\"lastName\"\n                            value\n                            =\"${person.lastName}\"\n                        />\n                    </fieldset>\n                    <fieldset>\n                    <label for=\"firstName\">Firstname</label>\n                    <input\n                        type=\"text\"\n                        name=\"firstName\"\n                        id=\"firstName\"\n                        value\n                        =\"${person.firstName}\"\n                    />\n                    </fieldset>\n                    <fieldset>\n                    <label for=\"birthday\">Birthday</label>\n                    <input\n                        type=\"date\"\n                        name=\"birthday\"\n                        id=\"birthday\"\n                        value\n                        =\"${person.birthday}\"\n                    />\n                    </fieldset>\n                    <div class=\"button\">\n                    <button type=\"submit\" class=\"save\">Save</button>\n                    <button type=\"button\" class=\"cancel\">Cancel</button>\n                    </div>\n                </div>\n`;\n\n            // listen to the window and the cancel button\n            window.addEventListener('click', e => {\n                if (e.target.closest('button.cancel')) {\n                    destroyPopup(popup);\n                    \n                }\n            })\n    \n            // Listen to the submit button to save the changes\n            popup.addEventListener('submit', (e) => {\n                e.preventDefault();\n                person.picture = popup.picture.value;\n                person.lastName = popup.lastName.value;\n                person.firstName = popup.firstName.value,\n                person.birthday = popup.birthday.value,\n                person.id = popup.id.value,\n\n                destroyPopup(popup);\n                displayList(person);\n                tbody.dispatchEvent(new CustomEvent('listUpdated'));\n\n            },\n                { once: true }\n            )\n            document.body.appendChild(popup);\n            await wait(50);\n            popup.classList.add('open');\n        })\n    }\n// Find the delete button and the table row\n    const deletePerson = (e) => {\n        if (e.target.closest('button.delete')) {\n          const tableRow = e.target.closest('tr');\n          const id = tableRow.dataset.id;\n          deletePopup(id);\n          tbody.dispatchEvent(new CustomEvent('listUpdated'));\n          \n        }\n\n    };\n    \n    \nconst deletePopup = (id) => {\n        // create confirmation popup here\n        return new Promise(async function (resolve) {\n                const modal = document.createElement('div');\n                modal.classList.add('modal');\n                modal.innerHTML = `\n                <p class=\"confirm\">Do you want to delete?</p>\n                <div class=\"confirm-btn\">\n                    <button class=\"icon yes\">\n                    <img src=\"./img/yes.svg\" alt=\"yes\">\n                    </buton>\n                    <button class=\"icon no\">\n                    <img src=\"./img/no.svg\" alt=\"no\">\n                    </buton>\n                </div>\n                `;\n                document.body.appendChild(modal);\n                modal.classList.add('open');\n// Listen to the yes button and the no button\n                window.addEventListener('click', (e) => {\n                    if (e.target.closest('button.yes')) {\n                        const personToDelete = data.filter(person => person.id != id);\n                        data = personToDelete;\n                        displayList(personToDelete);\n                        destroyPopup(modal);\n                    }\n                })\n                window.addEventListener('click', e => {\n                    if (e.target.closest('button.no')) {\n                        destroyPopup(modal);\n                    }\n                })\n    \n        });\n\n        }\n    const addList = (e) => {\n        if (e.target.closest('button.add')) {\n            addListPopup();\n        }\n        window.addEventListener('click', e => {\n            if (e.target.closest('button.cancel')) {\n                destroyPopup(newPopupList);\n            }\n        })\n        \n    }\n    const addListPopup = (e) => {\n        const newPopupList = document.createElement(`form`);\n        newPopupList.classList.add('AddListPopup');\n        newPopupList.innerHTML = `\n            <div class=\"form-input\">\n            <fieldset>\n            <label for=\"profile\">Picture</label>\n            <input\n                type=\"url\"\n                name=\"profile\"\n                id=\"profile\"\n                value=\"https://bit.ly/3mxlBiG\"\n            />\n            </fieldset>\n                <fieldset>\n                    <label for=\"lastname\">Lastname</label>\n                    <input\n                        type=\"text\"\n                        name=\"lastname\"\n                        id=\"lastname\"\n                        value=\"Manjaka\"\n                    />\n                </fieldset>\n                <fieldset>\n                <label for=\"firstname\">Firstname</label>\n                <input\n                    type=\"text\"\n                    name=\"firstname\"\n                    id=\"firstname\"\n                    value=\"Delancy\"\n                />\n                </fieldset>\n                <fieldset>\n                <label for=\"birthdate\">Birthday</label>\n                <input\n                    type=\"date\"\n                    name=\"birthdate\"\n                    id=\"birthdate\"\n                />\n                </fieldset>\n                <div class=\"button\">\n                <button type=\"submit\" class=\"save\">Save</button>\n                <button type=\"button\" class=\"cancel\">Cancel</button>\n                </div>\n            </div>\n`;\n\ndocument.body.appendChild(newPopupList);\nnewPopupList.classList.add('open');\nnewPopupList.addEventListener('submit', e => {\n    e.preventDefault();\n    const form = e.currentTarget;\n    const newList = {\n        picture: form.profile.value,\n        lastName: form.lastname.value,\n        firstName: form.firstname.value,\n        birthday: form.birthdate.value,\n        id: Date.now(),\n    }\n    data.push(newList);\n    displayList(data);\n    destroyPopup(newPopupList);\n    tbody.dispatchEvent(new CustomEvent('listUpdated'));\n})\n    }\n\nconst initLocalStorage = () => {\n    const dataList = JSON.parse(localStorage.getItem('data'));\n    if (dataList) {\n        data = dataList;\n        displayList();\n    }\n    tbody.dispatchEvent(new CustomEvent('listUpdated'));\n}\n// set the data in the local storage and stringify it\nconst updateLocalStorage = () => {\n    localStorage.setItem('data', JSON.stringify(data))\n}\n\n\n// Envent listners\n tbody.addEventListener('click', editPerson);\n tbody.addEventListener('click', deletePerson);\n addBtn.addEventListener('click', addList);\n tbody.addEventListener('listUpdated', updateLocalStorage);\n filterLastNameInput.addEventListener('input', searchPerson);\n filterMonthInput.addEventListener('input', searchByBirthMonth)\n resetBtn.addEventListener('click', resetFilters);\n\n\n initLocalStorage();\n\n }\n \nfetchPerson();"]}